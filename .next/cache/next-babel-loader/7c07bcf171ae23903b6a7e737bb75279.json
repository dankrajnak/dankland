{"ast":null,"code":"import _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nimport * as React from \"react\";\nimport { SpringSystem } from \"rebound\";\nimport throttle from \"../../Services/Throttle/Throttle.service\";\nimport Vector2d from \"../../Domain/Vector/Vector2d\";\n\nvar getCoordinatesFromMouseEvent = function getCoordinatesFromMouseEvent(event) {\n  var bounds = event.currentTarget.getBoundingClientRect();\n  return new Vector2d(event.clientX - bounds.left, event.clientY - bounds.top);\n};\n\nvar randomPosition = function randomPosition(maxX, maxY) {\n  return new Vector2d(Math.random() * maxX, Math.random() * maxY);\n};\n\nvar positionThreshold = 20;\n\nvar getNextPosition = function getNextPosition(currentPosition, width, height) {\n  var newPosition = randomPosition(width, height);\n\n  while (newPosition.minus(currentPosition).magnitude < positionThreshold) {\n    newPosition = randomPosition(width, height);\n  }\n\n  return newPosition;\n};\n\nvar useClickHoverWander = function useClickHoverWander(width, height) {\n  var initialFocusPoint = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : new Vector2d(0, 0);\n  var xSpring = React.useRef(null);\n  var ySpring = React.useRef(null);\n\n  var _React$useState = React.useState(initialFocusPoint),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      focusPoint = _React$useState2[0],\n      setFocusPoint = _React$useState2[1];\n\n  React.useEffect(function () {\n    var springSystem = new SpringSystem();\n    var springTension = 2;\n    var springFriction = 5;\n    xSpring.current = springSystem.createSpring(springTension, springFriction);\n    ySpring.current = springSystem.createSpring(springTension, springFriction);\n\n    var goToNextPosition = function goToNextPosition() {\n      if (!xSpring.current || !ySpring.current) {\n        return;\n      }\n\n      var newPosition = getNextPosition(new Vector2d(xSpring.current.getCurrentValue(), ySpring.current.getCurrentValue()), width, height); // Not sure exactly why, but there's a bug if we set the endValue right away\n      // Somtimes the spring just doesn't move.\n\n      setTimeout(function () {\n        if (xSpring.current && ySpring.current) {\n          xSpring.current.setEndValue(newPosition.x);\n          ySpring.current.setEndValue(newPosition.y);\n        }\n      }, 0);\n    };\n\n    xSpring.current.addListener({\n      onSpringUpdate: function onSpringUpdate(spring) {\n        if (!ySpring.current) {\n          return;\n        }\n\n        setFocusPoint(new Vector2d(spring.getCurrentValue(), ySpring.current.getCurrentValue()));\n      },\n      onSpringAtRest: function onSpringAtRest() {\n        if (ySpring.current && ySpring.current.isAtRest()) {\n          goToNextPosition();\n        }\n      }\n    });\n    ySpring.current.addListener({\n      onSpringUpdate: function onSpringUpdate(spring) {\n        if (!xSpring.current) {\n          return;\n        }\n\n        if (xSpring.current.isAtRest()) {\n          setFocusPoint(new Vector2d(xSpring.current.getCurrentValue(), spring.getCurrentValue()));\n        }\n      },\n      onSpringAtRest: function onSpringAtRest() {\n        if (xSpring.current && xSpring.current.isAtRest()) {\n          goToNextPosition();\n        }\n      }\n    });\n    xSpring.current.setEndValue(Math.random() * width);\n    ySpring.current.setEndValue(Math.random() * height);\n    return function () {\n      xSpring.current && xSpring.current.destroy();\n      ySpring.current && ySpring.current.destroy();\n    };\n  }, [height, width]);\n  var onMouseMove = React.useMemo(function () {\n    return throttle(function (event) {\n      var position = getCoordinatesFromMouseEvent(event);\n      xSpring.current && xSpring.current.setEndValue(position.x);\n      ySpring.current && ySpring.current.setEndValue(position.y);\n    }, 100);\n  }, []);\n  var onClick = React.useMemo(function () {\n    return function (event) {\n      var position = getCoordinatesFromMouseEvent(event);\n      xSpring.current && xSpring.current.setEndValue(position.x);\n      ySpring.current && ySpring.current.setEndValue(position.y);\n    };\n  }, []);\n  return [focusPoint, {\n    onClick: onClick,\n    onMouseMove: onMouseMove\n  }];\n};\n\nexport default useClickHoverWander;","map":{"version":3,"sources":["/Users/danielkrajnak/Documents/Code/dankLand/src/View/Hooks/useClickHoverWander.ts"],"names":["React","SpringSystem","throttle","Vector2d","getCoordinatesFromMouseEvent","event","bounds","currentTarget","getBoundingClientRect","clientX","left","clientY","top","randomPosition","maxX","maxY","Math","random","positionThreshold","getNextPosition","currentPosition","width","height","newPosition","minus","magnitude","useClickHoverWander","initialFocusPoint","xSpring","useRef","ySpring","useState","focusPoint","setFocusPoint","useEffect","springSystem","springTension","springFriction","current","createSpring","goToNextPosition","getCurrentValue","setTimeout","setEndValue","x","y","addListener","onSpringUpdate","spring","onSpringAtRest","isAtRest","destroy","onMouseMove","useMemo","position","onClick"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport { SpringSystem, Spring } from \"rebound\";\nimport throttle from \"../../Services/Throttle/Throttle.service\";\nimport Vector2d from \"../../Domain/Vector/Vector2d\";\n\nconst getCoordinatesFromMouseEvent = (event: React.MouseEvent): Vector2d => {\n  const bounds = event.currentTarget.getBoundingClientRect();\n  return new Vector2d(event.clientX - bounds.left, event.clientY - bounds.top);\n};\n\nconst randomPosition = (maxX: number, maxY: number): Vector2d =>\n  new Vector2d(Math.random() * maxX, Math.random() * maxY);\n\nconst positionThreshold = 20;\nconst getNextPosition = (\n  currentPosition: Vector2d,\n  width: number,\n  height: number\n) => {\n  let newPosition = randomPosition(width, height);\n  while (newPosition.minus(currentPosition).magnitude < positionThreshold) {\n    newPosition = randomPosition(width, height);\n  }\n  return newPosition;\n};\n\nconst useClickHoverWander = (\n  width: number,\n  height: number,\n  initialFocusPoint: Vector2d = new Vector2d(0, 0)\n): [\n  Vector2d,\n  {\n    onClick: (e: React.MouseEvent) => void;\n    onMouseMove: (e: React.MouseEvent) => void;\n  }\n] => {\n  const xSpring = React.useRef<Spring | null>(null);\n  const ySpring = React.useRef<Spring | null>(null);\n  const [focusPoint, setFocusPoint] = React.useState<Vector2d>(\n    initialFocusPoint\n  );\n\n  React.useEffect(() => {\n    const springSystem = new SpringSystem();\n    const springTension = 2;\n    const springFriction = 5;\n    xSpring.current = springSystem.createSpring(springTension, springFriction);\n    ySpring.current = springSystem.createSpring(springTension, springFriction);\n\n    const goToNextPosition = () => {\n      if (!xSpring.current || !ySpring.current) {\n        return;\n      }\n      const newPosition = getNextPosition(\n        new Vector2d(\n          xSpring.current.getCurrentValue(),\n          ySpring.current.getCurrentValue()\n        ),\n        width,\n        height\n      );\n      // Not sure exactly why, but there's a bug if we set the endValue right away\n      // Somtimes the spring just doesn't move.\n      setTimeout(() => {\n        if (xSpring.current && ySpring.current) {\n          xSpring.current.setEndValue(newPosition.x);\n          ySpring.current.setEndValue(newPosition.y);\n        }\n      }, 0);\n    };\n\n    xSpring.current.addListener({\n      onSpringUpdate: spring => {\n        if (!ySpring.current) {\n          return;\n        }\n        setFocusPoint(\n          new Vector2d(\n            spring.getCurrentValue(),\n            ySpring.current.getCurrentValue()\n          )\n        );\n      },\n      onSpringAtRest: () => {\n        if (ySpring.current && ySpring.current.isAtRest()) {\n          goToNextPosition();\n        }\n      },\n    });\n    ySpring.current.addListener({\n      onSpringUpdate: spring => {\n        if (!xSpring.current) {\n          return;\n        }\n        if (xSpring.current.isAtRest()) {\n          setFocusPoint(\n            new Vector2d(\n              xSpring.current.getCurrentValue(),\n              spring.getCurrentValue()\n            )\n          );\n        }\n      },\n      onSpringAtRest: () => {\n        if (xSpring.current && xSpring.current.isAtRest()) {\n          goToNextPosition();\n        }\n      },\n    });\n\n    xSpring.current.setEndValue(Math.random() * width);\n    ySpring.current.setEndValue(Math.random() * height);\n\n    return () => {\n      xSpring.current && xSpring.current.destroy();\n      ySpring.current && ySpring.current.destroy();\n    };\n  }, [height, width]);\n\n  const onMouseMove = React.useMemo(\n    () =>\n      throttle((event: React.MouseEvent) => {\n        const position = getCoordinatesFromMouseEvent(event);\n        xSpring.current && xSpring.current.setEndValue(position.x);\n        ySpring.current && ySpring.current.setEndValue(position.y);\n      }, 100),\n    []\n  );\n\n  const onClick = React.useMemo(\n    () => (event: React.MouseEvent) => {\n      const position = getCoordinatesFromMouseEvent(event);\n      xSpring.current && xSpring.current.setEndValue(position.x);\n      ySpring.current && ySpring.current.setEndValue(position.y);\n    },\n    []\n  );\n\n  return [\n    focusPoint,\n    {\n      onClick,\n      onMouseMove,\n    },\n  ];\n};\n\nexport default useClickHoverWander;\n"]},"metadata":{},"sourceType":"module"}